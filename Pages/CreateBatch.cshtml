@page
@model CreateBatchModel
@{
    ViewData["Title"] = "Create Batch";
}

<div class="container mt-4">
    <h1>Create Batch</h1>

    @if (Model.CarrierSteps.Any())
    {
        <form method="post">
            <input type="hidden" name="Carriers" value="@Model.Carriers" />

            <div class="table-responsive mt-4">
                <table class="table table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>Carrier</th>
                            <th>Qty</th>
                            <th colspan="2">Step 1</th>
                            <th colspan="2">Step 2</th>
                            <th colspan="2">Step 3</th>
                            <th colspan="2">Step 4</th>
                        </tr>
                        <tr>
                            <th></th>
                            <th></th>
                            <th>EqpId</th>
                            <th>PPID</th>
                            <th>EqpId</th>
                            <th>PPID</th>
                            <th>EqpId</th>
                            <th>PPID</th>
                            <th>EqpId</th>
                            <th>PPID</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var (carrierStep, index) in Model.CarrierSteps.Select((cs, i) => (cs, i)))
                        {
                            <tr>
                                <td id="carrier-@index">@carrierStep.Carrier</td>
                                <td id="qty-@index">@carrierStep.Qty</td>
                                <td id="step1-eqp-@index">@carrierStep.Step1.EqpId</td>
                                <td id="step1-ppid-@index">@carrierStep.Step1.PPID</td>
                                <td id="step2-eqp-@index">@carrierStep.Step2.EqpId</td>
                                <td id="step2-ppid-@index">@carrierStep.Step2.PPID</td>
                                <td id="step3-eqp-@index">@carrierStep.Step3.EqpId</td>
                                <td id="step3-ppid-@index">@carrierStep.Step3.PPID</td>
                                <td id="step4-eqp-@index">@carrierStep.Step4.EqpId</td>
                                <td id="step4-ppid-@index">@carrierStep.Step4.PPID</td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>

            <div class="row mt-3">
                <div class="col-md-12">
                    <button type="submit" class="btn btn-primary">作成</button>
                    <a href="/WipLotList" class="btn btn-secondary">キャンセル</a>
                </div>
            </div>
        </form>
    }
    else
    {
        <div class="alert alert-warning mt-3">
            キャリア情報が見つかりません。
        </div>
        <a href="/" class="btn btn-secondary">Dashboardに戻る</a>
    }
</div>
